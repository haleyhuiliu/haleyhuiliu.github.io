计算机网络可以指：
- 广义上：互连网（internet）
- 狭义上：互联网（Internet) - 遵循TCP/IP协议

互联网上主机（端系统）有两种通信方式：
- 客户-服务器方式（C\S）
- 对等连接方式（P2P）

互联网上路由器：转发收到的分组，分组转发是互联网的最重要的功能。

三种数据交换技术：
- 电路交换：面向连接。建立连接需要时间，需要预先分配传输宽带，通信线路利用率低
- 报文交换：采用存储转发技术。
- 分组交换：采用存储转发技术。在发送端，把较长的报文划分成短的固定长度的数据，每个数据段前面添加首部构成分组，每个分组在互联网中独立的选择传输路径。


网络协议：为互联网上设备如何连接以及数据之间如何传输而定义的标准

| OSI体系结构 | 五层体系结构 | TCP/IP协议结构 |
|:---------- |:-----------|:-------------|
| 应用层      | 应用层      | 应用层        |
| 表示层      |            |              |
| 回话层      |            |              |
| 运输层      | 运输层      | 运输层        |
| 网络层      | 网络层      | 网络层        |
| 数据链路层   | 数据链路层   | 网络接口层    |
| 物理层      | 物理层      |              |

协议是水平的， 是控制对等实体间的通信规则。

- 在物理层上，可以透明的传输比特流。
- 在数据链路层上，使用各条链路能传送无差错的数据帧（数据帧按顺序，无丢失，不重复）。
- 在网络层上，提供路由选择和网络互连功能，使得主机甲发送的数据分组能够按照合理的路由达到主机乙。
- 在运输层上，向高层用户屏蔽通信子网的细节，使用户看到的好像是两个运输层实体有一条端到端、可靠的、全双工的通信通路一样。

* * *

TCP协议或UDP协议是运输层协议，IP协议是网络层协议。

- 运输层发送端：将应用程序发出数据分组，加上首部，发送到网络上。
- 运输层接收端：将分组数据按序组合成字符流，交给应用程序。

运输层发送端和接收端，可以同时服务于多个应用程序-复用和分用。使用端口号（protocol port number）来标识不用的应用程序。

UDP协议：无连接协议，传送数据单位是UDP报文或用户数据报。在传送数据之前不用建立连接，接收端接受到数据也不需要给出任何确认。

TCP协议：面向连接协议，传送数据单位是TCP报文段。TCP不提供广播或多播服务。由于TCP要提供靠谱的、面向连接的运输服务，因此不可避免地增加来许多开销。这不仅使协议数据单元的首部增大很多，还要占用许多的处理机资源。

IP数据报要经过互联网中许多路由器的存储转发。

UDP/IP服务
1. 发送方应用程序交报文给运输层
2. 发送方UDP运输层对报文，不合并，也不拆分，保留报文边界，添加首部，交给网络层
3. 发送方IP网络层对太长的报文，会进行分片；对太短的报文，会使IP数据报首部相对太大，都会降低IP层效率（发送方应用层必须选择合适的大小的报文向下交付）
4. 接收方IP网路层接收到报文，向上交付给UDP运输层
5. 接收方UDP运输层会对报文去首部，向上交付给发送方应用程序

TCP/IP服务
1. 三次握手建立TCP连接：使双方能够知道对方的存在，协商参数（最大窗口值，可否使用窗口扩大选项，时间戳选项，服务质量），分配资源（缓存大小，连接表中项目）
2. 发送端TCP运输层，对数据分组，加上首部，加上序号，发出报文段。
3. 接收端TCP运输层，对已成功收到的报文发回一个相应的确认，如果发送端在合理的往返时延内未收到确认，那么对应的数据将会被重传（超时重传）。
4. 接收端TCP运输层，对收到对报文进行重新排序，丢弃重复的数据，再向上交付给应用程序
5. TCP连接释放

- 字节流是指应用进程发出或接收的字节序列，接收方应用程序收到的字节流必须和发送方应用程序发出的字节流完全一样。
- 报文段是指网络层发出或接受的数据块，接收方网络层收到的报文段不一定和发送方网络层发出的报文段完全一样，可能重复，可能丢失。

网络层也可以采取累计确认的方式，不必对收到的分组逐个发送确认，而是对按序达到对最后一个分组发送确认，从而表示所有分组都正确收到了。

UDP没有拥塞控制，对应用层交付下来对数据加上首部直接交付给网络层，不会降低发送速率。适合多媒体通信要求。
TCP提供流量控制，传输双方都有固定大小的缓存空间，TCP的接收端只允许发送端发送接收端缓冲区所能接纳的数据。

UDP支持一对一、-对多、多对一-和多对多的交互通信。
TCP提供点对点的交互通信。

* * *




